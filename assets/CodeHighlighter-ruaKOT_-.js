import{r as i,j as r}from"./index-ZVYxoX19.js";import{m as j,c as w,a as k}from"./motion-minimal-jJCu8YKk.js";import{t as C,u as N}from"./request-MvzBsxCw.js";import{g as _}from"./viewport-1IkFLRB6.js";import{u as E}from"./use-is-dark-tNK75MAG.js";const H=({children:e,className:t,duration:s=.6})=>{const o=i.useRef(null),[n,a]=i.useState("auto");return i.useEffect(()=>{if(o.current){const l=new ResizeObserver(u=>{const p=u[0].contentRect.height;a(p)});return l.observe(o.current),()=>{l.disconnect()}}},[]),r.jsx(j.div,{className:w("overflow-hidden",t),style:{height:n},initial:!1,animate:{height:n},transition:{duration:s},children:r.jsx("div",{ref:o,children:e})})},m={},c={};function h(e){return new Promise((t,s)=>{const o=m[e];if(o==="loaded")return t(null);if(o==="loading"){c[e]=c[e]?[...c[e],[t,s]]:[[t,s]];return}const n=document.createElement("script");n.src=e,n.crossOrigin="anonymous",m[e]="loading",n.onload=function(){m[e]="loaded",t(null),c[e]&&(c[e].forEach(([a])=>{a(null)}),delete c[e])},n.onerror=function(a){this.onerror=this.onload=null,delete m[e],c[e].forEach(([,l])=>{l(a)}),delete c[e],s(a)},document.head.appendChild(n)})}const d=new Map;function b(e){if(d.has(e)){const s=d.get(e);return{$link:s,remove:()=>{s.parentNode&&s.parentNode.removeChild(s),d.delete(e)}}}const t=document.createElement("link");return t.href=e,t.rel="stylesheet",t.type="text/css",t.crossOrigin="anonymous",d.set(e,t),t.onerror=()=>{t.onerror=null,d.delete(e)},document.head.appendChild(t),{remove:()=>{t.parentNode&&t.parentNode.removeChild(t),d.delete(e)},$link:t}}const g={"code-wrap":"_code-wrap_1uhyk_1","copy-tip":"_copy-tip_1uhyk_11","language-tip":"_language-tip_1uhyk_49"},S=e=>{const{lang:t,content:s}=e,o=i.useCallback(()=>{navigator.clipboard.writeText(s),C.success("COPIED!")},[s]),n=i.useRef(null);y(n);const a=i.useRef(null),[l,u]=i.useState(!0),[p,f]=i.useState(!1);return i.useEffect(()=>{const x=a.current;if(!x)return;const v=_().h/2;x.scrollHeight>=v?f(!0):f(!1)},[s]),r.jsxs("div",{className:g["code-wrap"],children:[r.jsx("span",{className:g["language-tip"],"aria-hidden":!0,children:t?.toUpperCase()}),r.jsxs(H,{className:"relative",children:[r.jsx("pre",{ref:a,className:k("line-numbers max-h-[50vh] !bg-transparent",!l&&"!max-h-[100%]"),"data-start":"1",children:r.jsx("code",{className:`language-${t??"markup"} !bg-transparent`,ref:n,children:s})}),p&&l&&r.jsx("div",{className:"absolute bottom-0 left-0 right-0 flex justify-center bg-[linear-gradient(180deg,transparent_0%,#fff_81%)] py-2 dark:bg-[linear-gradient(180deg,transparent_0%,oklch(var(--b1)/1)_81%)]",children:r.jsxs("button",{onClick:()=>u(!1),"aria-hidden":!0,className:"flex items-center justify-center text-xs",children:[r.jsx("i",{className:"icon-[mingcute--arrow-to-down-line]"}),r.jsx("span",{className:"ml-2",children:"展开"})]})})]}),r.jsx("div",{className:g["copy-tip"],onClick:o,"aria-hidden":!0,children:"Copy"})]})},M=({content:e,lang:t,className:s,style:o})=>{const n=i.useRef(null);return y(n),i.useEffect(()=>{window.Prism?.highlightElement(n.current)},[e,t]),r.jsx("pre",{className:w("!bg-transparent",s),style:o,"data-start":"1",children:r.jsx("code",{className:`language-${t??"markup"} !bg-transparent`,ref:n,children:e})})},y=e=>{const t=i.useRef(),s=N(),o=E();i.useInsertionEffect(()=>{const n=b(`https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/prism-themes/1.9.0/prism-one-${s?"light":o?"dark":"light"}.css`);if(t.current){const a=t.current;n.$link.onload=()=>{a.remove()}}t.current=n},[o,s]),i.useInsertionEffect(()=>{b("https://lf26-cdn-tos.bytecdntp.com/cdn/expire-1-M/prism/1.23.0/plugins/line-numbers/prism-line-numbers.min.css"),Promise.all([h("https://lf26-cdn-tos.bytecdntp.com/cdn/expire-1-M/prism/1.23.0/components/prism-core.min.js")]).then(()=>Promise.all([h("https://lf26-cdn-tos.bytecdntp.com/cdn/expire-1-M/prism/1.23.0/plugins/autoloader/prism-autoloader.min.js"),h("https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/prism/1.23.0/plugins/line-numbers/prism-line-numbers.min.js")])).then(()=>{e.current?requestAnimationFrame(()=>{window.Prism?.highlightElement(e.current),requestAnimationFrame(()=>{window.Prism?.highlightElement(e.current)})}):requestAnimationFrame(()=>{window.Prism?.highlightAll(),requestAnimationFrame(()=>{window.Prism?.highlightAll()})})})},[])},z=Object.freeze(Object.defineProperty({__proto__:null,BaseCodeHighlighter:M,HighLighter:S},Symbol.toStringTag,{value:"Module"}));export{H as A,M as B,z as C,S as H,b as a,h as l};
